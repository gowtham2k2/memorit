var gamePattern=[];var userPattern=[];var colors=["red","blue","green","yellow"];var gameStarted=!1;var level=0;$(document).on("keydown",()=>{if(!gameStarted){setTimeout(()=>{$(".replay").css("display","none");newSequence()},1000);gameStarted=!0}});$(".scoreBoard").on("click",()=>{if(!gameStarted){animatePress(".scoreBoard");setTimeout(()=>{$(".replay").css("display","none");newSequence()},1000);gameStarted=!0}});$(".replay").on("click",()=>{console.log("replay clicked");if(!gameStarted){$(".replay").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).css({display:"none"});$(".scoreBoard").removeClass("active-touch");setTimeout(()=>{newSequence()},1000);gameStarted=!0}});$(".tile").on("click",(e)=>{if(gameStarted){let userChosenColor=e.target.id;userPattern.push(userChosenColor);playBgm(userChosenColor);animatePress(`.tile-wrapper>#${userChosenColor}`);checkResult(userPattern.length-1)}});function newSequence(){level++;userPattern=[];$(".scoreBoard").text("Level "+level).css({animation:"glow 300ms linear"});let randomChosenColor=colors[Math.floor(Math.random()*colors.length)];setTimeout(()=>{playBgm(randomChosenColor);$(`.tile-wrapper>#${randomChosenColor}`).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100)},500);setTimeout(()=>{$(".scoreBoard").css({animation:"none"})},500);console.log(randomChosenColor);gamePattern.push(randomChosenColor)}
function playBgm(color){let audio=new Audio(`./assets/sounds/${color}.mp3`);audio.play()}
function animatePress(element){$(element).addClass("pressed");setTimeout(()=>{$(element).removeClass("pressed")},200)}
function checkResult(currentLevel){if(gamePattern[currentLevel]===userPattern[currentLevel]){if(userPattern.length===gamePattern.length){setTimeout(()=>{newSequence()},1000)}}else{$("body").addClass("game-over-theme");$(".scoreBoard").text("Game Over!!!");playBgm("wrong");setTimeout(()=>{$("body").removeClass("game-over-theme")},2000);$(".replay").css("display","block");startOver()}}
function startOver(){gamePattern=[];userPattern=[];level=0;gameStarted=!1;setTimeout(()=>{$(`.scoreBoard`).text("Tap me or Tap Replay â†» icon to Restart").addClass("active-touch")},2000)}